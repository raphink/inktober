<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Isaiah 49:1-6</title>
    <style>
        body, html {
            margin: 0;
            height: 100%;
            overflow: hidden;
            background-color: #000;
        }
        .background {
            background-image: url('islands.png');
            background-size: cover;
            background-position: center;
            height: 100vh;
            width: 100vw;
            position: absolute;
            top: 0;
            left: 0;
            filter: brightness(20%); /* Dim the background to 20% brightness */
            z-index: 1;
        }
        .foreground-background {
            background-image: url('islands.png');
            background-size: cover;
            background-position: center;
            height: 100vh;
            width: 100vw;
            position: absolute;
            top: 0;
            left: 0;
            clip-path: polygon(50% 50%, 0% 100%, 100% 100%); /* Initially cover the foreground with a placeholder clip path */
            z-index: 3;
        }
        .lighthouse {
            position: absolute;
            left: calc(50% - 10px); /* Adjusted offset from the middle */
            top: calc(50% - 40px); /* Adjusted offset from the middle */
            transform: translate(-50%, -50%);
            z-index: 4; /* Ensure the lighthouse is always visible */
        }
        .verse {
            position: absolute;
            color: #fff;
            font-size: 2em;
            text-shadow: 2px 2px 4px #000;
            transition: opacity 1s;
            opacity: 0;
        }
        .reveal-cone {
            position: absolute;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            background: radial-gradient(circle at center, rgba(255, 255, 200, 0.6) 0%, rgba(255, 255, 200, 0.1) 30%, rgba(255, 255, 200, 0) 100%);
            clip-path: polygon(50% 50%, 0% 100%, 100% 100%); /* Placeholder clip path */
            z-index: 2;
        }
        .flickering-circle {
            position: absolute;
            left: 50%;
            top: 50%;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(255, 255, 200, 0.8), rgba(255, 255, 200, 0) 70%);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            z-index: 5;
            animation: flicker 1.5s infinite alternate;
            pointer-events: none;
        }
        @keyframes flicker {
            0% { opacity: 0.8; }
            50% { opacity: 0.3; }
            100% { opacity: 0.8; }
        }
            .intermediate-background {
            background-image: url('islands.png');
            background-size: cover;
            background-position: center;
            height: 100vh;
            width: 100vw;
            position: absolute;
            top: 0;
            left: 0;
            clip-path: circle(150px at 50% 50%);
            z-index: 2;
        }
</style>
</head>
<body>
    <div class="background"></div>
    <div class="foreground-background"></div>
    <div class="intermediate-background"></div>
    <div class="lighthouse"></div>
    <div class="verse" style="top: 20%; left: 20%; z-index: 6;" id="verse1">"Listen to me, you islands;<br /> hear this, you distant nations..."</div>
    <div class="verse" style="top: 80%; left: 60%; z-index: 6;" id="verse2">"I will also make you a light for the Gentiles,<br /> that my salvation may reach to the ends of the earth."</div>
    <div class="reveal-cone"></div>
    <div class="flickering-circle"></div>
    <script>
        document.addEventListener('mousemove', function (event) {
            const intermediateBackground = document.querySelector('.intermediate-background');
            const lighthouse = document.querySelector('.lighthouse');
            const foregroundBackground = document.querySelector('.foreground-background');
            const revealCone = document.querySelector('.reveal-cone');
            const verse1 = document.getElementById('verse1');
            const verse2 = document.getElementById('verse2');
            
            const rect = lighthouse.getBoundingClientRect();
            const lighthouseX = rect.left + rect.width / 2;
            const lighthouseY = rect.top + rect.height / 2;

            const angle = Math.atan2(event.clientY - lighthouseY, event.clientX - lighthouseX) * 180 / Math.PI;
            
            // Reveal parts of the foreground background based on light position with a fixed shape rotating
            const narrowWidth = 30; // Narrow width at the lighthouse
            const wideWidth = 800; // Wide width at the distant side to ensure it reaches the sides of the screen
            const beamLength = 2000; // Extended length to ensure coverage
            const clipPathX1 = lighthouseX;
            const clipPathY1 = lighthouseY;
            const clipPathX2 = lighthouseX + narrowWidth * Math.cos((angle - 90) * Math.PI / 180);
            const clipPathY2 = lighthouseY + narrowWidth * Math.sin((angle - 90) * Math.PI / 180);
            const clipPathX3 = lighthouseX + beamLength * Math.cos(angle * Math.PI / 180) + wideWidth * Math.cos((angle - 90) * Math.PI / 180);
            const clipPathY3 = lighthouseY + beamLength * Math.sin(angle * Math.PI / 180) + wideWidth * Math.sin((angle - 90) * Math.PI / 180);
            const clipPathX4 = lighthouseX + beamLength * Math.cos(angle * Math.PI / 180) + wideWidth * Math.cos((angle + 90) * Math.PI / 180);
            const clipPathY4 = lighthouseY + beamLength * Math.sin(angle * Math.PI / 180) + wideWidth * Math.sin((angle + 90) * Math.PI / 180);
            foregroundBackground.style.clipPath = `polygon(${clipPathX1}px ${clipPathY1}px, ${clipPathX2}px ${clipPathY2}px, ${clipPathX3}px ${clipPathY3}px, ${clipPathX4}px ${clipPathY4}px)`;
            intermediateBackground.style.clipPath = `circle(150px at 50% 50%)`;
             // Reveal area in fixed shape rotating
            revealCone.style.clipPath = `polygon(${clipPathX1}px ${clipPathY1}px, ${clipPathX2}px ${clipPathY2}px, ${clipPathX3}px ${clipPathY3}px, ${clipPathX4}px ${clipPathY4}px)`; // Match the cone shape to add yellowish light effect

            // Reveal verses based on light position
            const distanceToVerse1 = Math.hypot(event.clientX - verse1.offsetLeft, event.clientY - verse1.offsetTop);
            const distanceToVerse2 = Math.hypot(event.clientX - verse2.offsetLeft, event.clientY - verse2.offsetTop);
            
            if (distanceToVerse1 < 200) {
                verse1.style.opacity = 1;
            } else {
                verse1.style.opacity = 0;
            }

            if (distanceToVerse2 < 200) {
                verse2.style.opacity = 1;
            } else {
                verse2.style.opacity = 0;
            }
        });
    </script>
</body>
</html>